{"remainingRequest":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\src\\views\\Blog\\components\\BlogToc.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\src\\views\\Blog\\components\\BlogToc.vue","mtime":1618302869220},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUmlnaHRMaXN0IGZyb20gIi4vUmlnaHRMaXN0IjsNCmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiQC91dGlscyI7DQpleHBvcnQgZGVmYXVsdCB7DQpjb21wb25lbnRzOnsNCiAgUmlnaHRMaXN0LA0KfSwNCnByb3BzOnsNCiAgdG9jOnsNCiAgICB0eXBlOkFycmF5LA0KICB9DQp9LA0KZGF0YSgpew0KICByZXR1cm57DQogICAgYWN0aXZlQW5jaG9yOiIiLCAgLy/lgYforr7pu5jorqTpgInkuK0NCiAgfQ0KfSwNCmNvbXB1dGVkOnsNCiAgICB0b2NXaW50U2VsZWN0KCl7DQogICAgICAvL+agueaNrnRvY+WxnuaAp+S7peWPimFjdGl2ZUFuY2hvcuW+l+WIsOW4puaciWlzU2VsZWN05bGe5oCn55qEdG9j5pWw57uEDQogICAgICBjb25zdCBnZXRUb2MgPSAodG9jID0gW10pPT4gew0KICAgICAgICAgcmV0dXJuIHRvYy5tYXAoICh0KSA9Pih7ICAvL3RvY+aVsOe7hOaYoOWwhA0KICAgICAgICAgICAuLi50LA0KICAgICAgICAgICBpc1NlbGVjdDp0LmFuY2hvciA9PT0gdGhpcy5hY3RpdmVBbmNob3IsICAvL+WIpOaWrXRvY+aVsOe7hOaYr+S4jeaYr+WSjOm7mOiupGFjdGl2ZUFuY2hvcuWMuemFjQ0KICAgICAgICAgICBjaGlsZHJlbjpnZXRUb2ModC5jaGlsZHJlbiksDQogICAgICAgICB9KSk7DQogICAgICB9OyANCiAgICAgcmV0dXJuIGdldFRvYyh0aGlzLnRvYykNCg0KICAgIH0sDQogICAgLy/moLnmja50b2Mg5b6X5Yiw5a6D5Lus5a+55bqU55qE5YWD57Sg5pWw57uEDQogIGRvbXMoKXsgICAvL+W+queOr3RvY+aVsOaNru+8jOiOt+WPlmlk5bm25re75Yqg5YiwZG9tc+aVsOe7hOmHjA0KICAgIGNvbnN0IGRvbXMgPSBbXTsNCg0KICAgIGNvbnN0IGFkZFRvRG9tcyA9ICh0b2MpID0+ew0KICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdG9jKSB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2codC5hbmNob3IpOw0KICAgICAgICAgICAgZG9tcy5wdXNoKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmFuY2hvcikpOw0KICAgICAgICAgIGlmKHQuY2hpbGRyZW4gJiYgdC5jaGlsZHJlbi5sZW5ndGgpew0KICAgICAgICAgICAgYWRkVG9Eb21zKHQuY2hpbGRyZW4pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgICAgYWRkVG9Eb21zKHRoaXMudG9jKTsNCiAgICAgIHJldHVybiBkb21zOw0KICB9DQoNCn0sDQpjcmVhdGVkKCl7DQovLyB3aW5kb3cuc2V0U2VsZWN0ID0gdGhpcy5zZXRTZWxlY3Q7DQogIHRoaXMuc2V0U2VsZWN0RGVib3VuY2UgPSAgZGVib3VuY2UodGhpcy5zZXRTZWxlY3QsIDUwKTsNCiAgIHRoaXMuJGJ1cy4kb24oIm1haW5TY3JvbGwiLCB0aGlzLnNldFNlbGVjdERlYm91bmNlICk7DQp9LA0KZGVzdHJveWVkKCl7DQogIHRoaXMuJGJ1cy4kb2ZmKCJtYWluU2Nyb2xsIiwgdGhpcy5zZXRTZWxlY3REZWJvdW5jZSApOw0KfSwNCm1ldGhvZHM6ew0KICBoYW5ka2VTZWxlY3QoaXRlbSl7DQogICAgLy8gY29uc29sZS5sb2coaXRlbSk7DQogICAgbG9jYXRpb24uaGFzaCA9IGl0ZW0uYW5jaG9yOyAgIA0KICB9LA0KDQovL+iuvue9rmFjdGl2ZUFuY2hvcuS4uuato+ehrueahOWAvA0Kc2V0U2VsZWN0KCl7DQogIC8vY29uc29sZS5sb2coMSk7DQogIHRoaXMuYWN0aXZlQW5jaG9yID0gIiI7IC8v55Sx5LqO5ZCO6Z2i6KaB5oyB57ut5pu05paw77yM5YWI5riF56m65LmL5YmN55qE54q25oCBDQogIGNvbnN0IHJhbmdlID0gMjAwOw0KICAgIGZvcihjb25zdCBkb20gb2YgdGhpcy5kb21zKXsNCiAgICAgIC8v55yL5LiA5LiL6L+Z5Liq5YWD57Sg5piv5LiN5piv6KKr6YCJ5LitDQogICAgICBpZighZG9tKXsNCiAgICAgICAgICBjb250aW51ZTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgLy/lvpfliLDlhYPntKDnprvop4blj6PliLDpobbpg6jnmoTot53nprsNCiAgICAgIGNvbnN0IHRvcCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7DQogICAgICAgIGlmKHRvcCA+PSAwICYmIHRvcCA8PSByYW5nZSApew0KICAgICAgICAgIC8v5Zyo6KeE5a6a6IyD5Zu0DQogICAgICAgICAgdGhpcy5hY3RpdmVBbmNob3IgPSBkb20uaWQ7DQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH1lbHNlIGlmKHRvcCA+IHJhbmdlKXsNCiAgICAgICAgICAgIC8v5Zyo6KeE5a6a6IyD5Zu05LiL5pa5DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyDlnKjop4TlrprojIPlm7TkuIrmlrkNCiAgICAgICAgICAgdGhpcy5hY3RpdmVBbmNob3IgPSBkb20uaWQ7ICAvL+WBh+iuvuiHquW3seiiq+a/gOa0u+eahO+8jOeEtuWQjue7p+e7reeci+WQjumdog0KICAgICAgICB9DQogICAgfQ0KICB9DQogfQ0KfQ0K"},{"version":3,"sources":["BlogToc.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogToc.vue","sourceRoot":"src/views/Blog/components","sourcesContent":["<template>\r\n<div class=\"right-detail-container\">\r\n  <h2>目录</h2>\r\n  <RightList :list=\"tocWintSelect\" @select=\"handkeSelect \" class=\"list\"/>\r\n</div>\r\n \r\n</template>\r\n\r\n<script>\r\nimport RightList from \"./RightList\";\r\nimport { debounce } from \"@/utils\";\r\nexport default {\r\ncomponents:{\r\n  RightList,\r\n},\r\nprops:{\r\n  toc:{\r\n    type:Array,\r\n  }\r\n},\r\ndata(){\r\n  return{\r\n    activeAnchor:\"\",  //假设默认选中\r\n  }\r\n},\r\ncomputed:{\r\n    tocWintSelect(){\r\n      //根据toc属性以及activeAnchor得到带有isSelect属性的toc数组\r\n      const getToc = (toc = [])=> {\r\n         return toc.map( (t) =>({  //toc数组映射\r\n           ...t,\r\n           isSelect:t.anchor === this.activeAnchor,  //判断toc数组是不是和默认activeAnchor匹配\r\n           children:getToc(t.children),\r\n         }));\r\n      }; \r\n     return getToc(this.toc)\r\n\r\n    },\r\n    //根据toc 得到它们对应的元素数组\r\n  doms(){   //循环toc数据，获取id并添加到doms数组里\r\n    const doms = [];\r\n\r\n    const addToDoms = (toc) =>{\r\n        for (const t of toc) {\r\n          // console.log(t.anchor);\r\n            doms.push( document.getElementById(t.anchor));\r\n          if(t.children && t.children.length){\r\n            addToDoms(t.children)\r\n          }\r\n        }\r\n    }\r\n      addToDoms(this.toc);\r\n      return doms;\r\n  }\r\n\r\n},\r\ncreated(){\r\n// window.setSelect = this.setSelect;\r\n  this.setSelectDebounce =  debounce(this.setSelect, 50);\r\n   this.$bus.$on(\"mainScroll\", this.setSelectDebounce );\r\n},\r\ndestroyed(){\r\n  this.$bus.$off(\"mainScroll\", this.setSelectDebounce );\r\n},\r\nmethods:{\r\n  handkeSelect(item){\r\n    // console.log(item);\r\n    location.hash = item.anchor;   \r\n  },\r\n\r\n//设置activeAnchor为正确的值\r\nsetSelect(){\r\n  //console.log(1);\r\n  this.activeAnchor = \"\"; //由于后面要持续更新，先清空之前的状态\r\n  const range = 200;\r\n    for(const dom of this.doms){\r\n      //看一下这个元素是不是被选中\r\n      if(!dom){\r\n          continue;\r\n      }\r\n      \r\n      //得到元素离视口到顶部的距离\r\n      const top = dom.getBoundingClientRect().top;\r\n        if(top >= 0 && top <= range ){\r\n          //在规定范围\r\n          this.activeAnchor = dom.id;\r\n          return\r\n        }else if(top > range){\r\n            //在规定范围下方\r\n            return\r\n        } else {\r\n          // 在规定范围上方\r\n           this.activeAnchor = dom.id;  //假设自己被激活的，然后继续看后面\r\n        }\r\n    }\r\n  }\r\n }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// @import \"~@/styles/var.less\";\r\n.right-detail-container{\r\n  h2{\r\n      letter-spacing: 2px;\r\n       margin: 0;\r\n  }\r\n  .list{\r\n    font-size: 1em;\r\n     font-weight: bold;\r\n  }\r\n}\r\n  \r\n  \r\n</style>"]}]}