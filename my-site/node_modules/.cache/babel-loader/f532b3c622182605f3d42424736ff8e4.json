{"remainingRequest":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\babel-loader\\lib\\index.js!E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\src\\views\\Blog\\components\\BlogToc.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\src\\views\\Blog\\components\\BlogToc.vue","mtime":1618302869220},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VUE2学习\\搭建工程\\个人博客项目\\my-site\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkU6L1ZVRTJcdTVCNjZcdTRFNjAvXHU2NDJEXHU1RUZBXHU1REU1XHU3QTBCL1x1NEUyQVx1NEVCQVx1NTM1QVx1NUJBMlx1OTg3OVx1NzZFRS9teS1zaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovVlVFMlx1NUI2Nlx1NEU2MC9cdTY0MkRcdTVFRkFcdTVERTVcdTdBMEIvXHU0RTJBXHU0RUJBXHU1MzVBXHU1QkEyXHU5ODc5XHU3NkVFL215LXNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuYW5jaG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFJpZ2h0TGlzdCBmcm9tICIuL1JpZ2h0TGlzdCI7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiQC91dGlscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBSaWdodExpc3Q6IFJpZ2h0TGlzdAogIH0sCiAgcHJvcHM6IHsKICAgIHRvYzogewogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZUFuY2hvcjogIiIgLy/lgYforr7pu5jorqTpgInkuK0KCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvY1dpbnRTZWxlY3Q6IGZ1bmN0aW9uIHRvY1dpbnRTZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL+agueaNrnRvY+WxnuaAp+S7peWPimFjdGl2ZUFuY2hvcuW+l+WIsOW4puaciWlzU2VsZWN05bGe5oCn55qEdG9j5pWw57uECiAgICAgIHZhciBnZXRUb2MgPSBmdW5jdGlvbiBnZXRUb2MoKSB7CiAgICAgICAgdmFyIHRvYyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICAgICAgcmV0dXJuIHRvYy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHQpLCB7fSwgewogICAgICAgICAgICBpc1NlbGVjdDogdC5hbmNob3IgPT09IF90aGlzLmFjdGl2ZUFuY2hvciwKICAgICAgICAgICAgLy/liKTmlq10b2PmlbDnu4TmmK/kuI3mmK/lkozpu5jorqRhY3RpdmVBbmNob3LljLnphY0KICAgICAgICAgICAgY2hpbGRyZW46IGdldFRvYyh0LmNoaWxkcmVuKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICByZXR1cm4gZ2V0VG9jKHRoaXMudG9jKTsKICAgIH0sCiAgICAvL+agueaNrnRvYyDlvpfliLDlroPku6zlr7nlupTnmoTlhYPntKDmlbDnu4QKICAgIGRvbXM6IGZ1bmN0aW9uIGRvbXMoKSB7CiAgICAgIC8v5b6q546vdG9j5pWw5o2u77yM6I635Y+WaWTlubbmt7vliqDliLBkb21z5pWw57uE6YeMCiAgICAgIHZhciBkb21zID0gW107CgogICAgICB2YXIgYWRkVG9Eb21zID0gZnVuY3Rpb24gYWRkVG9Eb21zKHRvYykgewogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0b2MpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciB0ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHQuYW5jaG9yKTsKICAgICAgICAgICAgZG9tcy5wdXNoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuYW5jaG9yKSk7CgogICAgICAgICAgICBpZiAodC5jaGlsZHJlbiAmJiB0LmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgIGFkZFRvRG9tcyh0LmNoaWxkcmVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBhZGRUb0RvbXModGhpcy50b2MpOwogICAgICByZXR1cm4gZG9tczsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyB3aW5kb3cuc2V0U2VsZWN0ID0gdGhpcy5zZXRTZWxlY3Q7CiAgICB0aGlzLnNldFNlbGVjdERlYm91bmNlID0gZGVib3VuY2UodGhpcy5zZXRTZWxlY3QsIDUwKTsKICAgIHRoaXMuJGJ1cy4kb24oIm1haW5TY3JvbGwiLCB0aGlzLnNldFNlbGVjdERlYm91bmNlKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgdGhpcy4kYnVzLiRvZmYoIm1haW5TY3JvbGwiLCB0aGlzLnNldFNlbGVjdERlYm91bmNlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRrZVNlbGVjdDogZnVuY3Rpb24gaGFuZGtlU2VsZWN0KGl0ZW0pIHsKICAgICAgLy8gY29uc29sZS5sb2coaXRlbSk7CiAgICAgIGxvY2F0aW9uLmhhc2ggPSBpdGVtLmFuY2hvcjsKICAgIH0sCiAgICAvL+iuvue9rmFjdGl2ZUFuY2hvcuS4uuato+ehrueahOWAvAogICAgc2V0U2VsZWN0OiBmdW5jdGlvbiBzZXRTZWxlY3QoKSB7CiAgICAgIC8vY29uc29sZS5sb2coMSk7CiAgICAgIHRoaXMuYWN0aXZlQW5jaG9yID0gIiI7IC8v55Sx5LqO5ZCO6Z2i6KaB5oyB57ut5pu05paw77yM5YWI5riF56m65LmL5YmN55qE54q25oCBCgogICAgICB2YXIgcmFuZ2UgPSAyMDA7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZG9tcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZG9tID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgIC8v55yL5LiA5LiL6L+Z5Liq5YWD57Sg5piv5LiN5piv6KKr6YCJ5LitCiAgICAgICAgICBpZiAoIWRvbSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gLy/lvpfliLDlhYPntKDnprvop4blj6PliLDpobbpg6jnmoTot53nprsKCgogICAgICAgICAgdmFyIHRvcCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CgogICAgICAgICAgaWYgKHRvcCA+PSAwICYmIHRvcCA8PSByYW5nZSkgewogICAgICAgICAgICAvL+WcqOinhOWumuiMg+WbtAogICAgICAgICAgICB0aGlzLmFjdGl2ZUFuY2hvciA9IGRvbS5pZDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIGlmICh0b3AgPiByYW5nZSkgewogICAgICAgICAgICAvL+WcqOinhOWumuiMg+WbtOS4i+aWuQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDlnKjop4TlrprojIPlm7TkuIrmlrkKICAgICAgICAgICAgdGhpcy5hY3RpdmVBbmNob3IgPSBkb20uaWQ7IC8v5YGH6K6+6Ieq5bex6KKr5r+A5rS755qE77yM54S25ZCO57un57ut55yL5ZCO6Z2iCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["BlogToc.vue"],"names":[],"mappings":";;;;;;;;;;;;AASA,OAAA,SAAA,MAAA,aAAA;AACA,SAAA,QAAA,QAAA,SAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAJA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA,CACA;;AADA,KAAA;AAGA,GAbA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA;AACA,UAAA,MAAA,GAAA,SAAA,MAAA,GAAA;AAAA,YAAA,GAAA,uEAAA,EAAA;AACA,eAAA,GAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,iDACA,CADA;AAEA,YAAA,QAAA,EAAA,CAAA,CAAA,MAAA,KAAA,KAAA,CAAA,YAFA;AAEA;AACA,YAAA,QAAA,EAAA,MAAA,CAAA,CAAA,CAAA,QAAA;AAHA;AAAA,SAAA,CAAA;AAKA,OANA;;AAOA,aAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AAEA,KAZA;AAaA;AACA,IAAA,IAdA,kBAcA;AAAA;AACA,UAAA,IAAA,GAAA,EAAA;;AAEA,UAAA,SAAA,GAAA,SAAA,SAAA,CAAA,GAAA,EAAA;AAAA,mDACA,GADA;AAAA;;AAAA;AACA,8DAAA;AAAA,gBAAA,CAAA;AACA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,CAAA,CAAA,MAAA,CAAA;;AACA,gBAAA,CAAA,CAAA,QAAA,IAAA,CAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,cAAA,SAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAQA,OARA;;AASA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA;AACA,aAAA,IAAA;AACA;AA5BA,GAdA;AA6CA,EAAA,OA7CA,qBA6CA;AACA;AACA,SAAA,iBAAA,GAAA,QAAA,CAAA,KAAA,SAAA,EAAA,EAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA,GAjDA;AAkDA,EAAA,SAlDA,uBAkDA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,iBAAA;AACA,GApDA;AAqDA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,IADA,EACA;AACA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA;AACA,KAJA;AAMA;AACA,IAAA,SAPA,uBAOA;AACA;AACA,WAAA,YAAA,GAAA,EAAA,CAFA,CAEA;;AACA,UAAA,KAAA,GAAA,GAAA;;AAHA,kDAIA,KAAA,IAJA;AAAA;;AAAA;AAIA,+DAAA;AAAA,cAAA,GAAA;;AACA;AACA,cAAA,CAAA,GAAA,EAAA;AACA;AACA,WAJA,CAMA;;;AACA,cAAA,GAAA,GAAA,GAAA,CAAA,qBAAA,GAAA,GAAA;;AACA,cAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,KAAA,EAAA;AACA;AACA,iBAAA,YAAA,GAAA,GAAA,CAAA,EAAA;AACA;AACA,WAJA,MAIA,IAAA,GAAA,GAAA,KAAA,EAAA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA,iBAAA,YAAA,GAAA,GAAA,CAAA,EAAA,CAFA,CAEA;AACA;AACA;AAvBA;AAAA;AAAA;AAAA;AAAA;AAwBA;AA/BA;AArDA,CAAA","sourcesContent":["<template>\r\n<div class=\"right-detail-container\">\r\n  <h2>目录</h2>\r\n  <RightList :list=\"tocWintSelect\" @select=\"handkeSelect \" class=\"list\"/>\r\n</div>\r\n \r\n</template>\r\n\r\n<script>\r\nimport RightList from \"./RightList\";\r\nimport { debounce } from \"@/utils\";\r\nexport default {\r\ncomponents:{\r\n  RightList,\r\n},\r\nprops:{\r\n  toc:{\r\n    type:Array,\r\n  }\r\n},\r\ndata(){\r\n  return{\r\n    activeAnchor:\"\",  //假设默认选中\r\n  }\r\n},\r\ncomputed:{\r\n    tocWintSelect(){\r\n      //根据toc属性以及activeAnchor得到带有isSelect属性的toc数组\r\n      const getToc = (toc = [])=> {\r\n         return toc.map( (t) =>({  //toc数组映射\r\n           ...t,\r\n           isSelect:t.anchor === this.activeAnchor,  //判断toc数组是不是和默认activeAnchor匹配\r\n           children:getToc(t.children),\r\n         }));\r\n      }; \r\n     return getToc(this.toc)\r\n\r\n    },\r\n    //根据toc 得到它们对应的元素数组\r\n  doms(){   //循环toc数据，获取id并添加到doms数组里\r\n    const doms = [];\r\n\r\n    const addToDoms = (toc) =>{\r\n        for (const t of toc) {\r\n          // console.log(t.anchor);\r\n            doms.push( document.getElementById(t.anchor));\r\n          if(t.children && t.children.length){\r\n            addToDoms(t.children)\r\n          }\r\n        }\r\n    }\r\n      addToDoms(this.toc);\r\n      return doms;\r\n  }\r\n\r\n},\r\ncreated(){\r\n// window.setSelect = this.setSelect;\r\n  this.setSelectDebounce =  debounce(this.setSelect, 50);\r\n   this.$bus.$on(\"mainScroll\", this.setSelectDebounce );\r\n},\r\ndestroyed(){\r\n  this.$bus.$off(\"mainScroll\", this.setSelectDebounce );\r\n},\r\nmethods:{\r\n  handkeSelect(item){\r\n    // console.log(item);\r\n    location.hash = item.anchor;   \r\n  },\r\n\r\n//设置activeAnchor为正确的值\r\nsetSelect(){\r\n  //console.log(1);\r\n  this.activeAnchor = \"\"; //由于后面要持续更新，先清空之前的状态\r\n  const range = 200;\r\n    for(const dom of this.doms){\r\n      //看一下这个元素是不是被选中\r\n      if(!dom){\r\n          continue;\r\n      }\r\n      \r\n      //得到元素离视口到顶部的距离\r\n      const top = dom.getBoundingClientRect().top;\r\n        if(top >= 0 && top <= range ){\r\n          //在规定范围\r\n          this.activeAnchor = dom.id;\r\n          return\r\n        }else if(top > range){\r\n            //在规定范围下方\r\n            return\r\n        } else {\r\n          // 在规定范围上方\r\n           this.activeAnchor = dom.id;  //假设自己被激活的，然后继续看后面\r\n        }\r\n    }\r\n  }\r\n }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// @import \"~@/styles/var.less\";\r\n.right-detail-container{\r\n  h2{\r\n      letter-spacing: 2px;\r\n       margin: 0;\r\n  }\r\n  .list{\r\n    font-size: 1em;\r\n     font-weight: bold;\r\n  }\r\n}\r\n  \r\n  \r\n</style>"],"sourceRoot":"src/views/Blog/components"}]}